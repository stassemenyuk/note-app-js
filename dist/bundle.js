(()=>{"use strict";function e(e){c(JSON.parse(JSON.stringify(d[e])),"arch"),n(e,"note")}function t(e){c(JSON.parse(JSON.stringify(o[e])),"note"),n(e,"arch")}function n(e,t="note"){if("note"==t){let t=[...d.slice(0,e),...d.slice(e+1)];t.forEach(((t,n)=>{n>=e&&t.id--})),d=t}else{let t=[...o.slice(0,e),...o.slice(e+1)];t.forEach(((t,n)=>{n>=e&&t.id--})),o=t}l()}function c(e,t="note"){let{text:n,time:c,category:r,dates:s}=e;"note"===t?d.push({text:n,time:c,category:r,dates:s,id:a}):o.push({text:n,time:c,category:r,dates:s,id:i}),l()}function r(e,t){e.addEventListener("click",(()=>{t.classList.toggle("hide")}))}let a,i,d=[],o=[];function s(e){if(0===e.length)return"<tr><td>You don't have any notes</td></tr>";{let t="";return e.map((({text:n,time:c,id:r,category:a,dates:i})=>{let o;o=e===d?`<button class="archive btn btn-secondary" data-id='${r}'>Archive</button>\n      <button class="delete btn btn-danger" data-id='${r}'>X</button>`:`<button class="unarchive btn btn-secondary" data-id='${r}'>Unarchive</button>`,t+=`<tr>\n      <td>${c}</td><td contenteditable class='text' id='${r}''>${n}</td><td>${a}</td><td>${i}</td>\n      <td>${o}</td>\n      </tr>`})),t}}function l(){const c=document.querySelector(".list"),r=document.querySelector(".archived-list");let l=s(d);c.innerHTML=l;let h=s(o);r.innerHTML=h,u("archive",e),u("delete",n),u("unarchive",t),document.querySelectorAll(".text").forEach((e=>{let t=+e.getAttribute("id");e.addEventListener("input",(e=>{!function(e,t){d.forEach((n=>{if(n.id===t){let c=JSON.parse(JSON.stringify(n));c.text=e;let r=/\d+\/\d+\/\d+/.exec(e)||"-";c.dates=r;let a=[...d.slice(0,t),c,...d.slice(t+1)];d=a}})),o.forEach((n=>{if(n.id===t){let c=JSON.parse(JSON.stringify(n));c.text=e;let r=/\d+\/\d+\/\d+/.exec(e)||"-";c.dates=r;let a=[...o.slice(0,t),c,...o.slice(t+1)];o=a}}))}(e.target.innerHTML,t)}))})),a=d.length,i=o.length,function(){let e=0,t=0,n=0,c=0,r=0,a=0;d.forEach((t=>{switch(t.category){case"Task":e++;break;case"Random thought":n++;break;case"Idea":r++}})),o.forEach((e=>{switch(e.category){case"Task":t++;break;case"Random thought":c++;break;case"Idea":a++}}));const i=document.querySelector(".tasks-active"),s=document.querySelector(".tasks-archived"),l=document.querySelector(".thoughts-active"),u=document.querySelector(".thoughts-archived"),h=document.querySelector(".ideas-active"),f=document.querySelector(".ideas-archived");i.innerHTML=e,s.innerHTML=t,l.innerHTML=n,u.innerHTML=c,h.innerHTML=r,f.innerHTML=a}()}function u(e,t){document.querySelectorAll(`.${e}`).forEach((e=>{let n=+e.getAttribute("data-id");e.addEventListener("click",(()=>t(n)))}))}const h=document.querySelector(".form"),f=document.querySelector(".create"),m=document.querySelector(".close-form"),y=document.querySelector(".get-archived"),g=document.querySelector(".archive-block");l(),h.addEventListener("submit",(function(e){e.preventDefault();let t=e.target.elements;if(""===t[0].value)return;let n={};n.text=t[0].value,n.time=(new Date).toLocaleTimeString(),n.category=t[1][t[1].options.selectedIndex].label,n.dates=/\d+\/\d+\/\d+/.exec(t[0].value)||"-",e.target.elements[0].value="",c(n,"note")})),r(f,h),r(y,g),m.addEventListener("click",(()=>{h.classList.add("hide")}))})();