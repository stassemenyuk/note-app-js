(()=>{"use strict";function e(e){let t=JSON.parse(JSON.stringify(a[e])),c=[...a.slice(0,e),...a.slice(e+1)];c.forEach(((t,c)=>{c>=e&&t.id--})),a=c,t.id=i;let n=[...d,t];d=n,l()}function t(e){let t=JSON.parse(JSON.stringify(d[e])),c=[...d.slice(0,e),...d.slice(e+1)];c.forEach(((t,c)=>{c>=e&&t.id--})),d=c,t.id=r;let n=[...a,t];a=n,l()}function c(e){let t=[...a.slice(0,e),...a.slice(e+1)];t.forEach(((t,c)=>{c>=e&&t.id--})),a=t,l()}function n(e,t){e.addEventListener("click",(()=>{t.classList.toggle("hide")}))}let r,i,a=[],d=[];function o(e){if(0===e.length)return"<tr><td>You don't have any notes</td></tr>";{let t="";return e.map((({text:c,time:n,id:r,category:i,dates:d})=>{let o;o=e===a?`<button class="archive btn btn-secondary" data-id='${r}'>Archive</button>\n      <button class="delete btn btn-danger" data-id='${r}'>X</button>`:`<button class="unarchive btn btn-secondary" data-id='${r}'>Unarchive</button>`,t+=`<tr>\n      <td>${n}</td><td contenteditable class='text' id='${r}''>${c}</td><td>${i}</td><td>${d}</td>\n      <td>${o}</td>\n      </tr>`})),t}}function l(){const n=document.querySelector(".list"),l=document.querySelector(".archived-list");let u=o(a);n.innerHTML=u;let h=o(d);l.innerHTML=h,s("archive",e),s("delete",c),s("unarchive",t),document.querySelectorAll(".text").forEach((e=>{let t=+e.getAttribute("id");e.addEventListener("input",(e=>{!function(e,t){a.forEach((c=>{if(c.id===t){let n=JSON.parse(JSON.stringify(c));n.text=e;let r=/\d+\/\d+\/\d+/.exec(e)||"-";n.dates=r;let i=[...a.slice(0,t),n,...a.slice(t+1)];a=i}})),d.forEach((c=>{if(c.id===t){let n=JSON.parse(JSON.stringify(c));n.text=e;let r=/\d+\/\d+\/\d+/.exec(e)||"-";n.dates=r;let i=[...d.slice(0,t),n,...d.slice(t+1)];d=i}}))}(e.target.innerHTML,t)}))})),r=a.length,i=d.length,function(){let e=0,t=0,c=0,n=0,r=0,i=0;a.forEach((t=>{switch(t.category){case"Task":e++;break;case"Random thought":c++;break;case"Idea":r++}})),d.forEach((e=>{switch(e.category){case"Task":t++;break;case"Random thought":n++;break;case"Idea":i++}}));const o=document.querySelector(".tasks-active"),l=document.querySelector(".tasks-archived"),s=document.querySelector(".thoughts-active"),u=document.querySelector(".thoughts-archived"),h=document.querySelector(".ideas-active"),f=document.querySelector(".ideas-archived");o.innerHTML=e,l.innerHTML=t,s.innerHTML=c,u.innerHTML=n,h.innerHTML=r,f.innerHTML=i}()}function s(e,t){document.querySelectorAll(`.${e}`).forEach((e=>{let c=+e.getAttribute("data-id");e.addEventListener("click",(()=>t(c)))}))}const u=document.querySelector(".form"),h=document.querySelector(".create"),f=document.querySelector(".close-form"),m=document.querySelector(".get-archived"),v=document.querySelector(".archive-block");l(),u.addEventListener("submit",(function(e){e.preventDefault();let t=e.target.elements;if(""===t[0].value)return;let c=(new Date).toLocaleTimeString(),n=/\d+\/\d+\/\d+/.exec(t[0].value)||"-";a.push({text:t[0].value,time:c,category:t[1][t[1].options.selectedIndex].label,dates:n,id:r}),l(),e.target.elements[0].value=""})),n(h,u),n(m,v),f.addEventListener("click",(()=>{u.classList.add("hide")}))})();